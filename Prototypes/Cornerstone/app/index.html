<!DOCTYPE html>

<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <title>cornerstoneApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1" />
    <link rel="stylesheet" href="bower/_bower.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="">
  </head>

  <body ng-app="cornerstoneApp">
    <h1>Welcome to Boom Angular.js Generator!</h1>

    <div id="dicomImage" style="width:512px;height:512px;"></div>
<!-- <img src="img/CT010001.jpg" id="test-image"> -->
    <div ng-view></div>
    
    <!--<script type="text/javascript" src="http://code.stephenmorley.org/javascript/finding-the-memory-usage-of-objects/sizeof.js"></script>-->
    <script type="text/javascript" src="bower/_bower.js"></script>
    <script type="text/javascript" src="js/all.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {

        var element = $('#dicomImage').get(0);
        cornerstone.enable(element);

        var currentImageIndex = 0;

        // show image #1 initially
        function updateTheImage(imageIndex) {
            currentImageIndex = imageIndex;
            cornerstone.loadImage('base64://' + currentImageIndex)
            // cornerstone.loadImage('example://' + currentImageIndex)
              .then(function(image) {
                  console.log('before displayImage');
                  cornerstone.displayImage(element, image);
              });
        };

        updateTheImage(0);

        $('#dicomImage').on('mousewheel DOMMouseScroll', function (e) {
            // Firefox e.originalEvent.detail > 0 scroll back, < 0 scroll forward
            // chrome/safari e.originalEvent.wheelDelta < 0 scroll back, > 0 scroll forward
            if (e.originalEvent.wheelDelta < 0 || e.originalEvent.detail > 0) {
                currentImageIndex += 1;
                // if (currentImageIndex == 0) {
                //     updateTheImage(1);
                // }
            } else {
                if (currentImageIndex > 0){
                  currentImageIndex -= 1;
                }
                // if (currentImageIndex == 1) {
                //     updateTheImage(0);
                // }
            }
            updateTheImage(currentImageIndex);
            //prevent page fom scrolling
            return false;
        });
    });
    </script>

    <!-- endbuild -->
  </body>
</html>
